# I2C Read Invalid Buffer Test
# Test-ID: I2C-COMM-005
# Validates: readRaw() returns false for null buffer
# Expected: Error logged, function returns false without crash
# Timeout: 90000ms

name: I2C Read Invalid Buffer (I2C-COMM-005)
version: 1
steps:
  # I2C Bus Manager initializes
  - wait-serial: "I2C Bus Manager initialized successfully"

  # Phase 3 completes
  - wait-serial: "Phase 3: Hardware Abstraction READY"

  # System operates normally
  - wait-serial: "Phase 4: Sensor System READY"

# NOTE: This test validates defensive coding in readRaw()
# Implementation check (from i2c_bus.cpp line 235):
#   if (buffer == nullptr || length == 0) {
#       LOG_ERROR("I2C read: Invalid buffer or length");
#       return false;
#   }
#
# To test explicitly:
# - Requires unit test calling readRaw(0x44, 0x00, nullptr, 2)
# - Expected: Returns false, logs "Invalid buffer or length"

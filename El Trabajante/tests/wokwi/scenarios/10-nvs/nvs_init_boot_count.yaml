# NVS Boot Count Increment Test
# Test-ID: NVS-INIT-005
# Validates boot_count is incremented after each restart
# Timeout: 90000ms
#
# Expected behavior:
# - boot_count is read from NVS at startup
# - boot_count is incremented and saved back
# - System logs the current boot count
#
# Note: In Wokwi simulation, boot_count starts at 0 on first boot

name: NVS Boot Count Increment
version: 1
steps:
  # Wait for system initialization
  - wait-serial: "ESP32 Sensor Network"

  # NVS initialization
  - wait-serial: "StorageManager: Initialized"

  # Boot count is stored in system_config namespace
  # ConfigManager loads it during initialization
  # Look for evidence of boot count being tracked
  - wait-serial: "Phase 1: Core Infrastructure READY"

  # System must continue to operational state
  - wait-serial: "WiFi connected successfully"
  - wait-serial: "MQTT connected successfully"

  # Heartbeat contains diagnostic info including boot metrics
  - wait-serial: "heartbeat"

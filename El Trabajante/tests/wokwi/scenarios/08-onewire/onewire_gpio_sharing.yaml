# OneWire GPIO Sharing Test (OW-MULTI-001)
# Validates multiple DS18B20 sensors can share one GPIO
# Tests: GPIO sharing mechanism for OneWire bus
# Note: Wokwi diagram.json has only 1 DS18B20, but tests sharing logic
# Timeout: 90000ms

name: OneWire GPIO Sharing
version: 1
steps:
  # Boot completes
  - wait-serial: "Phase 5: Actuator System READY"

  # OneWire bus initialized on GPIO 4
  - wait-serial: "OneWire Bus Manager initialized"
  - wait-serial: "Pin: GPIO 4"

  # When multiple DS18B20 sensors are configured on same GPIO:
  # First sensor: "Reserved GPIO 4 for OneWire bus (owner: onewire_bus/4)"
  # Second sensor: "Sharing OneWire bus on GPIO 4"

  # In single-sensor scenario, just first reservation happens
  - wait-serial: "heartbeat"

  # This test validates the sharing mechanism exists
  # Multi-sensor would require extended diagram.json with 2+ DS18B20

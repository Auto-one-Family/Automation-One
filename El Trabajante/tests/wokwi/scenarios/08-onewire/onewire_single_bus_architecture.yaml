# OneWire Single Bus Architecture Test (OW-ARCH-001)
# Validates single-bus architecture enforcement
# Tests: Cannot use different GPIO for OneWire after initialization
# Note: ESP32 OneWire implementation supports only one bus at a time
# Timeout: 90000ms

name: OneWire Single Bus Architecture
version: 1
steps:
  # Boot with OneWire on GPIO 4
  - wait-serial: "OneWire Bus Manager initialization started"
  - wait-serial: "Using hardware default pin GPIO 4"
  - wait-serial: "OneWire Bus Manager initialized successfully"

  # Phase 3 complete
  - wait-serial: "Phase 3: Hardware Abstraction READY"

  # When a sensor is configured on the same GPIO, it works:
  # (In contrast, different GPIO would fail with single-bus conflict)

  # If sensor config for different GPIO arrived, would see:
  # "OneWire bus already active on GPIO X, cannot use GPIO Y (single-bus architecture)"

  # Normal operation with single bus
  - wait-serial: "Phase 5: Actuator System READY"
